<p>Partner: {{ partner.partnerId }}</p>
<p>Location: <span id="Location"></span></p>
<p>Has All-In Pricing: <span id="HasAllInPricing"></span></p>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
<script>
    const $location = document.getElementById('Location');
    const $hasAllInPricing = document.getElementById('HasAllInPricing');

    axios
        .get('http://localhost:4545/v2/locations', {
            timeout: 3000
        })
        .then(response => {
            const location = response.data.location;
            const hasAllInPricing = {{ partner.hasDefaultAllInPricing }} && ['on', 'qc'].indexOf(location.subdivision_code.toLowerCase()) > -1;
            
            $location.innerHTML = `${location.city}, ${location.subdivision_code}`;
            $hasAllInPricing.innerHTML = hasAllInPricing ? 'Yes' : 'No';
        })
        .catch(err => {
            if (err.code === 'ECONNABORTED') {
                $location.innerHTML = $hasAllInPricing.innerHTML = 'Timedout';
            }
            // TODO: Handle error.
            console.error(err);
        });
</script>
